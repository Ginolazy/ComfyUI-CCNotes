function a0_0xdb9f(_0x3becf9,_0x18e7d2){_0x3becf9=_0x3becf9-0x178;const _0x110e3a=a0_0x110e();let _0xdb9fc7=_0x110e3a[_0x3becf9];if(a0_0xdb9f['JRlhVW']===undefined){var _0x3c7cda=function(_0x47cb87){const _0x35b65d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2856c5='',_0x44bee0='';for(let _0x515eb5=0x0,_0x4db0f2,_0x158ff0,_0x5b5613=0x0;_0x158ff0=_0x47cb87['charAt'](_0x5b5613++);~_0x158ff0&&(_0x4db0f2=_0x515eb5%0x4?_0x4db0f2*0x40+_0x158ff0:_0x158ff0,_0x515eb5++%0x4)?_0x2856c5+=String['fromCharCode'](0xff&_0x4db0f2>>(-0x2*_0x515eb5&0x6)):0x0){_0x158ff0=_0x35b65d['indexOf'](_0x158ff0);}for(let _0x221c49=0x0,_0x470aee=_0x2856c5['length'];_0x221c49<_0x470aee;_0x221c49++){_0x44bee0+='%'+('00'+_0x2856c5['charCodeAt'](_0x221c49)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x44bee0);};a0_0xdb9f['fzxswn']=_0x3c7cda,a0_0xdb9f['eBfgna']={},a0_0xdb9f['JRlhVW']=!![];}const _0x229a06=_0x110e3a[0x0],_0x2183df=_0x3becf9+_0x229a06,_0x383015=a0_0xdb9f['eBfgna'][_0x2183df];return!_0x383015?(_0xdb9fc7=a0_0xdb9f['fzxswn'](_0xdb9fc7),a0_0xdb9f['eBfgna'][_0x2183df]=_0xdb9fc7):_0xdb9fc7=_0x383015,_0xdb9fc7;}const a0_0x91192d=a0_0xdb9f;(function(_0x4e40e0,_0x255c25){const _0x15de2b=a0_0xdb9f,_0x5a3910=_0x4e40e0();while(!![]){try{const _0x541013=-parseInt(_0x15de2b(0x182))/0x1*(parseInt(_0x15de2b(0x1eb))/0x2)+parseInt(_0x15de2b(0x192))/0x3+-parseInt(_0x15de2b(0x1ab))/0x4*(parseInt(_0x15de2b(0x1b7))/0x5)+-parseInt(_0x15de2b(0x1e1))/0x6*(parseInt(_0x15de2b(0x1be))/0x7)+-parseInt(_0x15de2b(0x1ce))/0x8*(-parseInt(_0x15de2b(0x1c7))/0x9)+parseInt(_0x15de2b(0x18f))/0xa+parseInt(_0x15de2b(0x1bc))/0xb*(-parseInt(_0x15de2b(0x1b4))/0xc);if(_0x541013===_0x255c25)break;else _0x5a3910['push'](_0x5a3910['shift']());}catch(_0x586e45){_0x5a3910['push'](_0x5a3910['shift']());}}}(a0_0x110e,0x87c1b));import{app}from'../../scripts/app.js';import{api}from'../../scripts/api.js';import{ComfyWidgets}from'../../scripts/widgets.js';export function setupOutputPortSync(_0x2856c5,_0x44bee0){const _0x33881b=a0_0xdb9f;_0x2856c5[_0x33881b(0x1e2)][_0x33881b(0x1a5)]=function(){const _0x190db8=_0x33881b;if(!this[_0x190db8(0x184)]||!this[_0x190db8(0x1bf)])return;const _0x158ff0=this[_0x190db8(0x184)][_0x190db8(0x1ae)](_0x221c49=>_0x221c49[_0x190db8(0x195)]['startsWith'](_0x190db8(0x17e))),_0x5b5613=Math[_0x190db8(0x179)](0x1,_0x158ff0[_0x190db8(0x1cf)]);while(this[_0x190db8(0x1bf)][_0x190db8(0x1cf)]>_0x5b5613){this[_0x190db8(0x188)](this['outputs'][_0x190db8(0x1cf)]-0x1);}while(this[_0x190db8(0x1bf)][_0x190db8(0x1cf)]<_0x5b5613){const _0x470aee=this[_0x190db8(0x1bf)][_0x190db8(0x1cf)]+0x1;this['addOutput'](_0x190db8(0x1af)+_0x470aee,'*');}for(let _0x152e83=0x0;_0x152e83<_0x5b5613;_0x152e83++){const _0x24d0c8=_0x158ff0[_0x152e83],_0x1776bf=this['outputs'][_0x152e83];if(!_0x1776bf)continue;let _0x1ad73a=_0x190db8(0x1af)+(_0x152e83+0x1),_0x54f072='*';if(_0x24d0c8&&_0x24d0c8['link']!==null){const _0x15f909=_0x44bee0['graph'][_0x190db8(0x1b3)][_0x24d0c8[_0x190db8(0x1e9)]];if(_0x15f909){const _0x522058=_0x44bee0[_0x190db8(0x1b0)]['getNodeById'](_0x15f909[_0x190db8(0x1a1)]);if(_0x522058){const _0x4190b4=_0x522058[_0x190db8(0x1bf)][_0x15f909[_0x190db8(0x1ed)]];if(_0x4190b4){const _0x8bbc6=_0x4190b4[_0x190db8(0x1e8)],_0x1452d1=_0x4190b4[_0x190db8(0x1a3)]||_0x4190b4['name'];if(_0x8bbc6!=='*')_0x54f072=_0x8bbc6,_0x1ad73a=_0x54f072;else _0x1452d1&&_0x1452d1!=='*'&&(_0x1ad73a=_0x1452d1);}}}}if(_0x1776bf[_0x190db8(0x1e8)]!==_0x54f072||_0x1776bf[_0x190db8(0x1a3)]!==_0x1ad73a){if(_0x1776bf[_0x190db8(0x1b3)]&&_0x1776bf[_0x190db8(0x1b3)]['length']>0x0){const _0x28011a=[];for(const _0x24f393 of _0x1776bf[_0x190db8(0x1b3)]){const _0x45c9ce=_0x44bee0['graph'][_0x190db8(0x1b3)][_0x24f393];if(!_0x45c9ce)continue;const _0x5d6664=_0x44bee0[_0x190db8(0x1b0)]['getNodeById'](_0x45c9ce[_0x190db8(0x193)]);if(!_0x5d6664)continue;const _0x451fa8=_0x5d6664[_0x190db8(0x184)][_0x45c9ce[_0x190db8(0x1ca)]];if(!_0x451fa8)continue;if(_0x54f072==='*')continue;if(_0x451fa8[_0x190db8(0x1e8)]==='*')continue;_0x451fa8[_0x190db8(0x1e8)]!==_0x54f072&&_0x28011a[_0x190db8(0x1d9)](_0x24f393);}for(const _0x4e51bd of _0x28011a){_0x44bee0['graph'][_0x190db8(0x1dd)](_0x4e51bd);}}_0x1776bf[_0x190db8(0x1e8)]=_0x54f072,_0x1776bf['label']=_0x1ad73a,_0x1776bf['name']=_0x1ad73a[_0x190db8(0x1a2)]();}}};const _0x515eb5=_0x2856c5[_0x33881b(0x1e2)][_0x33881b(0x1de)];_0x2856c5[_0x33881b(0x1e2)][_0x33881b(0x1de)]=function(){const _0x1ae583=_0x33881b;_0x515eb5&&_0x515eb5[_0x1ae583(0x1df)](this,arguments),this['syncOutputPorts'](),this['setSize'](this[_0x1ae583(0x1ba)]()),this[_0x1ae583(0x19c)](!![],!![]);};const _0x4db0f2=_0x2856c5[_0x33881b(0x1e2)][_0x33881b(0x1da)];_0x2856c5['prototype'][_0x33881b(0x1da)]=function(_0x2d4dc9,_0x1fdeef,_0x31d0c5,_0x336b23){const _0x126251=_0x33881b;_0x4db0f2&&_0x4db0f2[_0x126251(0x1df)](this,arguments),setTimeout(()=>{const _0x3322c4=_0x126251;this['syncOutputPorts'](),this[_0x3322c4(0x19c)](!![],!![]);},0xa);};}function findTextWidgetInsertPosition(_0x49955a){const _0x4dfe63=a0_0xdb9f,_0x36a253=_0x49955a[_0x4dfe63(0x1d6)]?.[_0x4dfe63(0x1cc)](_0x10741d=>_0x10741d[_0x4dfe63(0x195)]===_0x4dfe63(0x185));if(_0x36a253)return _0x49955a[_0x4dfe63(0x1d6)][_0x4dfe63(0x1a0)](_0x36a253)+0x1;const _0x1372d6=_0x49955a[_0x4dfe63(0x1d6)]?.[_0x4dfe63(0x1cc)](_0x4d1031=>_0x4d1031[_0x4dfe63(0x195)]===_0x4dfe63(0x1c6));if(_0x1372d6)return _0x49955a[_0x4dfe63(0x1d6)]['indexOf'](_0x1372d6)+0x1;return _0x49955a[_0x4dfe63(0x1d6)]['length'];}app[a0_0x91192d(0x1dc)]({'name':a0_0x91192d(0x1b6),async 'nodeCreated'(_0x2451db){const _0x5c5031=a0_0x91192d;_0x2451db[_0x5c5031(0x19e)][_0x5c5031(0x1cb)](_0x5c5031(0x197))&&(_0x2451db[_0x5c5031(0x1d2)]=[{'filename':_0x5c5031(0x186),'subfolder':'','type':_0x5c5031(0x178)}]);if(_0x2451db[_0x5c5031(0x19e)]['includes']('Pause')){addNativeControlPanel(_0x2451db);const _0x238c4b=_0x2451db[_0x5c5031(0x1d6)]?.[_0x5c5031(0x1cc)](_0x1fb054=>_0x1fb054[_0x5c5031(0x195)]===_0x5c5031(0x1c6));if(_0x238c4b){const _0xfd5fbd=_0x238c4b[_0x5c5031(0x1c5)];_0x238c4b[_0x5c5031(0x1c5)]=function(){const _0x3dcb9f=_0x5c5031;_0xfd5fbd&&_0xfd5fbd[_0x3dcb9f(0x1df)](this,arguments),updateButtonVisibility(_0x2451db);};}_0x2451db[_0x5c5031(0x18b)](_0x2451db[_0x5c5031(0x1ba)]());}if(_0x2451db['comfyClass']===_0x5c5031(0x1e3)){const _0x1dfc62=_0x2451db[_0x5c5031(0x1d6)]?.['find'](_0xc6c94a=>_0xc6c94a[_0x5c5031(0x195)]==='preview_text');_0x1dfc62&&(_0x1dfc62[_0x5c5031(0x1e8)]=_0x5c5031(0x1bb),_0x1dfc62[_0x5c5031(0x1ba)]=()=>[0x0,0x0]),_0x2451db['setSize'](_0x2451db[_0x5c5031(0x1ba)]());}},async 'loadedGraphNode'(_0x1e9253){const _0x36a4d5=a0_0x91192d;if(_0x1e9253[_0x36a4d5(0x19e)]['includes'](_0x36a4d5(0x194))){addNativeControlPanel(_0x1e9253);if(_0x1e9253['comfyClass']['includes'](_0x36a4d5(0x197))){const _0x5dbf1a=_0x1e9253[_0x36a4d5(0x1b9)];_0x1e9253['onMouseDown']=function(_0x34822c,_0x511e9b,_0x37f708){const _0x1f21e7=_0x36a4d5,_0x8fcb7a=_0x5dbf1a?_0x5dbf1a[_0x1f21e7(0x1df)](this,arguments):undefined;if(this[_0x1f21e7(0x18d)]&&this[_0x1f21e7(0x18d)][_0x1f21e7(0x1cf)]>0x1){const _0x312f6e=_0x511e9b[0x0],_0xa11ed1=this[_0x1f21e7(0x191)][0x0];if(typeof this['imageIndex']!==_0x1f21e7(0x1ea))this[_0x1f21e7(0x1db)]=0x0;if(_0x34822c[_0x1f21e7(0x1b8)]===0x0){if(_0x312f6e<_0xa11ed1*0.25){if(this[_0x1f21e7(0x1db)]>0x0)this[_0x1f21e7(0x1db)]--;}else{if(_0x312f6e>_0xa11ed1*0.75){if(this[_0x1f21e7(0x1db)]<this[_0x1f21e7(0x18d)][_0x1f21e7(0x1cf)]-0x1)this[_0x1f21e7(0x1db)]++;}}}}return _0x8fcb7a;};}if(_0x1e9253[_0x36a4d5(0x19e)][_0x36a4d5(0x1cb)](_0x36a4d5(0x197))){if(_0x1e9253['properties']?.[_0x36a4d5(0x1c0)]){_0x1e9253[_0x36a4d5(0x1d2)]=_0x1e9253['properties']['_sdppp_cache'][_0x36a4d5(0x1c4)]||_0x1e9253['imageData'];const _0x5eb5fc=_0x1e9253[_0x36a4d5(0x1e0)][_0x36a4d5(0x1c0)]['text']||[];if(_0x5eb5fc['length']>0x0){const _0x3b087d='preview_text';_0x5eb5fc[_0x36a4d5(0x181)]((_0x15c7ce,_0x282e3c)=>{const _0x6207c4=_0x36a4d5,_0x351149=_0x282e3c===0x0?_0x3b087d:_0x3b087d+'_'+_0x282e3c;let _0x29404a=_0x1e9253[_0x6207c4(0x1d6)][_0x6207c4(0x1cc)](_0x27da18=>_0x27da18[_0x6207c4(0x195)]===_0x351149);if(!_0x29404a){const _0x18e17c=ComfyWidgets[_0x6207c4(0x17b)](_0x1e9253,_0x351149,['STRING',{'multiline':!![]}],app);_0x29404a=_0x18e17c[_0x6207c4(0x1a4)];const _0xbc7e53=_0x1e9253[_0x6207c4(0x1d6)][_0x6207c4(0x1a0)](_0x29404a);_0xbc7e53!==-0x1&&_0x1e9253[_0x6207c4(0x1d6)]['splice'](_0xbc7e53,0x1);const _0x38370=findTextWidgetInsertPosition(_0x1e9253);_0x1e9253['widgets'][_0x6207c4(0x1d1)](_0x38370+_0x282e3c,0x0,_0x29404a);}_0x29404a[_0x6207c4(0x1e8)]=_0x6207c4(0x1c3),_0x29404a[_0x6207c4(0x1e7)]=_0x15c7ce,_0x29404a[_0x6207c4(0x1b1)]?_0x29404a['options']['multiline']=!![]:_0x29404a[_0x6207c4(0x1b1)]={'multiline':!![]};});}}}updateButtonVisibility(_0x1e9253);}},async 'setup'(){const _0x13d51c=a0_0x91192d;api['addEventListener'](_0x13d51c(0x1f2),async({detail:_0x3a9519})=>{const _0xc3cd1b=_0x13d51c,{node_id:_0x311f50,node_type:_0x3f9da5,action:_0x2b9c5b,data:_0x30291f}=_0x3a9519,_0x280bcf=app[_0xc3cd1b(0x1b0)][_0xc3cd1b(0x1e4)](_0x311f50);if(!_0x280bcf)return;switch(_0x3f9da5){case'preview':handlePreviewData(_0x280bcf,_0x30291f);break;case _0xc3cd1b(0x19f):if(_0x2b9c5b===_0xc3cd1b(0x19f)){const _0x43faf6=getControlActionControl(_0x280bcf);if(_0x43faf6['isLinked']&&_0x43faf6[_0xc3cd1b(0x1e9)]){const _0x62b486=app[_0xc3cd1b(0x1b0)][_0xc3cd1b(0x1b3)][_0x43faf6[_0xc3cd1b(0x1e9)]],_0x4bb3da=app[_0xc3cd1b(0x1b0)][_0xc3cd1b(0x1e4)](_0x62b486[_0xc3cd1b(0x1a1)]);_0x4bb3da&&_0x4bb3da[_0xc3cd1b(0x1d6)]&&_0x4bb3da[_0xc3cd1b(0x1d6)]['length']>0x0&&(_0x280bcf['_restore_state']=_0x4bb3da[_0xc3cd1b(0x1d6)][0x0][_0xc3cd1b(0x1e7)]);}else _0x43faf6['widget']?_0x280bcf[_0xc3cd1b(0x1c1)]=_0x43faf6[_0xc3cd1b(0x1a4)][_0xc3cd1b(0x1e7)]:_0x280bcf[_0xc3cd1b(0x1c1)]=_0xc3cd1b(0x194);_0x280bcf[_0xc3cd1b(0x18a)]=!![],startAutoResumeCheck(_0x280bcf);}break;case'preview_pause':_0x30291f&&_0x30291f[_0xc3cd1b(0x1c4)]&&_0x30291f[_0xc3cd1b(0x1c4)][_0xc3cd1b(0x1cf)]>0x0?(_0x280bcf[_0xc3cd1b(0x1d2)]=_0x30291f[_0xc3cd1b(0x1c4)],renderImageMode(_0x280bcf,_0x30291f[_0xc3cd1b(0x1c4)]),!_0x280bcf[_0xc3cd1b(0x1e0)][_0xc3cd1b(0x1c0)]&&(_0x280bcf[_0xc3cd1b(0x1e0)]['_sdppp_cache']={}),_0x280bcf[_0xc3cd1b(0x1e0)][_0xc3cd1b(0x1c0)]['images']=_0x30291f[_0xc3cd1b(0x1c4)],_0x280bcf[_0xc3cd1b(0x1e0)][_0xc3cd1b(0x1c0)][_0xc3cd1b(0x1c3)]=_0x30291f[_0xc3cd1b(0x1c3)]):(_0x280bcf[_0xc3cd1b(0x18d)]=null,_0x280bcf['imageData']=null,_0x280bcf[_0xc3cd1b(0x1e0)][_0xc3cd1b(0x1c0)]&&delete _0x280bcf['properties'][_0xc3cd1b(0x1c0)]);const _0x455721='preview_text',_0x1fc80c=_0x30291f&&_0x30291f['text']?_0x30291f[_0xc3cd1b(0x1c3)]:[],_0x33a31c=_0x280bcf[_0xc3cd1b(0x1d6)][_0xc3cd1b(0x1ae)](_0x4cc279=>_0x4cc279[_0xc3cd1b(0x195)]===_0x455721||_0x4cc279[_0xc3cd1b(0x195)][_0xc3cd1b(0x196)](_0x455721+'_'));_0x33a31c[_0xc3cd1b(0x181)](_0x4fd51d=>{const _0x98fe20=_0xc3cd1b;_0x4fd51d[_0x98fe20(0x1e8)]=_0x98fe20(0x1bb),_0x4fd51d['computeSize']=()=>[0x0,0x0],_0x4fd51d[_0x98fe20(0x1e7)]='';});_0x1fc80c[_0xc3cd1b(0x1cf)]>0x0&&_0x1fc80c['forEach']((_0x5e70dd,_0x9ac7d0)=>{const _0x40d057=_0xc3cd1b,_0x3bf1dd=_0x9ac7d0===0x0?_0x455721:_0x455721+'_'+_0x9ac7d0;let _0x3868c6=_0x280bcf[_0x40d057(0x1d6)][_0x40d057(0x1cc)](_0x451a2d=>_0x451a2d['name']===_0x3bf1dd);if(!_0x3868c6){const _0xa996d2=ComfyWidgets[_0x40d057(0x17b)](_0x280bcf,_0x3bf1dd,[_0x40d057(0x17b),{'multiline':!![]}],app);_0x3868c6=_0xa996d2[_0x40d057(0x1a4)];const _0x5863ec=_0x280bcf['widgets'][_0x40d057(0x1a0)](_0x3868c6);if(_0x5863ec!==-0x1){_0x280bcf['widgets']['splice'](_0x5863ec,0x1);let _0x5d3d36=findTextWidgetInsertPosition(_0x280bcf);const _0x18a1e1=_0x280bcf[_0x40d057(0x1d6)][_0x40d057(0x190)](_0x182308=>_0x182308['name'][_0x40d057(0x196)](_0x455721));_0x18a1e1!==-0x1&&_0x18a1e1>=_0x5d3d36&&(_0x5d3d36=_0x18a1e1+0x1),_0x280bcf[_0x40d057(0x1d6)][_0x40d057(0x1d1)](_0x5d3d36,0x0,_0x3868c6);}}_0x3868c6[_0x40d057(0x1e8)]=_0x40d057(0x1c3),_0x3868c6['value']=_0x5e70dd,_0x3868c6[_0x40d057(0x1ba)]=function(_0x1fe7a4){const _0x4073f8=_0x40d057,_0x1cf78d=0x32,_0x1b9525=0x12c,_0xfc8372=0x3,_0x4a5714=0x12,_0x24b7e9=(this[_0x4073f8(0x1e7)]||'')[_0x4073f8(0x19a)]('\x0a')[_0x4073f8(0x1cf)],_0x39e9cb=_0x24b7e9*_0x4a5714+_0xfc8372;return[_0x1fe7a4,Math[_0x4073f8(0x179)](_0x1cf78d,Math['min'](_0x39e9cb,_0x1b9525))];},_0x3868c6[_0x40d057(0x1b1)]?_0x3868c6[_0x40d057(0x1b1)][_0x40d057(0x17c)]=!![]:_0x3868c6[_0x40d057(0x1b1)]={'multiline':!![]},_0x3868c6[_0x40d057(0x19d)]&&(_0x3868c6[_0x40d057(0x19d)][_0x40d057(0x1cd)][_0x40d057(0x1aa)]='',_0x3868c6['inputEl']['readOnly']=![]);});setTimeout(()=>{const _0x5d3bca=_0xc3cd1b;app[_0x5d3bca(0x1b0)][_0x5d3bca(0x19c)](!![],![]);},0x1);if(_0x2b9c5b===_0xc3cd1b(0x19f)){const _0x138637=getControlActionControl(_0x280bcf);if(_0x138637[_0xc3cd1b(0x17d)]&&_0x138637[_0xc3cd1b(0x1e9)]){const _0x3a59dc=app[_0xc3cd1b(0x1b0)][_0xc3cd1b(0x1b3)][_0x138637['link']],_0x195030=app[_0xc3cd1b(0x1b0)][_0xc3cd1b(0x1e4)](_0x3a59dc[_0xc3cd1b(0x1a1)]);_0x195030&&_0x195030[_0xc3cd1b(0x1d6)]&&_0x195030[_0xc3cd1b(0x1d6)][_0xc3cd1b(0x1cf)]>0x0&&(_0x280bcf[_0xc3cd1b(0x1c1)]=_0x195030[_0xc3cd1b(0x1d6)][0x0]['value']);}else _0x138637[_0xc3cd1b(0x1a4)]?_0x280bcf['_restore_state']=_0x138637[_0xc3cd1b(0x1a4)][_0xc3cd1b(0x1e7)]:_0x280bcf[_0xc3cd1b(0x1c1)]=_0xc3cd1b(0x194);_0x280bcf[_0xc3cd1b(0x18a)]=!![],startAutoResumeCheck(_0x280bcf);}break;}});}});function a0_0x110e(){const _0x94f1a5=['C3rHCNrZv2L0Aa','uhjLDMLLDW','zxjYB3i','y2f0y2G','C3bSAxq','CMvHze9UBhK','C2v0rgLYDhLdyw52yxm','Aw5WDxrfBa','y29TzNLdBgfZCW','Cgf1C2u','Aw5KzxHpzG','B3jPz2LUx2LK','Dg9mB3DLCKnHC2u','BgfIzwW','D2LKz2v0','C3LUy091Dhb1DfbVCNrZ','yxbPvvjm','D2fYBG','zMLSzw5HBwu','l3zPzxC/','zgLZCgXHEq','nhD5vfLdEG','ywrKv2LKz2v0','ywXS','zMLSDgvY','B3v0Chv0xW','z3jHCgG','B3b0Aw9UCW','zMLUzeLUzgv4','BgLUA3m','nJbjuxvbANq','xsbgywLSzwqGDg8GC2vUzcbHy3rPB246','q0noB3rLCY5qCMv2Awv3ugf1C2voB2rLCW','mJyZotuZmfbMqK9Uwq','yNv0Dg9U','B25nB3vZzurVD24','y29TChv0zvnPEMu','AgLKzgvU','mtu3ntm4n3fluLvNBG','x2nJBM90zxnFzNvSBf9PBwDZ','nZDjsMLAyMC','B3v0Chv0CW','x3nKChbWx2nHy2HL','x3jLC3rVCMvFC3rHDgu','C2vHCMnOugfYyw1Z','Dgv4Da','Aw1Hz2vZ','y2fSBgjHy2S','ywn0Aw9U','oxnqsxbiEG','BwfW','C29YDa','DgfYz2v0x3nSB3q','Aw5JBhvKzxm','zMLUza','C3r5Bgu','nZi4ndG3mNP2DKLwra','BgvUz3rO','w0ndtM90zxnDievYCM9YihbHCNnPBMCGy2XPChnWywnLihvYBdO','C3bSAwnL','Aw1Hz2veyxrH','C3rYAw5NAwz5','zMv0y2HbCgK','C3jJ','D2LKz2v0CW','ue9tva','BwLU','ChvZAa','B25dB25Uzwn0Aw9UC0nOyw5Nzq','Aw1Hz2vjBMrLEa','CMvNAxn0zxjfEhrLBNnPB24','CMvTB3zLtgLUAW','B25oB2rLq3jLyxrLza','yxbWBhK','ChjVCgvYDgLLCW','mtGYodm4sMDZufbP','ChjVDg90ExbL','qw55uhjLDMLLDW','z2v0tM9Kzuj5swq','y2HLy2TFDgLTzxi','ChjLDMLLD190zxH0','DMfSDwu','DhLWzq','BgLUAW','BNvTyMvY','mJG5otrcyNjRywq','x2nJBM90zxnFBgfZDf92ywXPzf9PBMrLEa','B3jPz2LUx3nSB3q','y29UDgLUDwu','C3vIzM9SzgvY','4PA2ienptLrjtLvf','C2XPy2u','y2nUB3rLCY5UB2rLx2v2zw50','DgvTCa','Bwf4','z2v0','u1rssu5h','BxvSDgLSAw5L','AxnmAw5Rzwq','Aw5WDxrF','zMLSzw5HBwu9y2XPChnWywnLlw1HC2ST','x2nJBM90zxnFzNvSBf9PBwfNzxnFzgf0yq','zM9YrwfJAa','ntnbAvr6wfi','Aw50zxjYDxb0','Aw5WDxrZ','4PAJienbtKnfta','CgXHy2vOB2XKzxiUCg5N','B25SB2fK','CMvTB3zLt3v0Chv0','CgfZCW','AxnFD2fPDgLUzW','C2v0u2L6zq','xsbgywLSzwqGDg8GBg9HzcbPBwfNztOG','Aw1NCW','y2fUy2vS','otq3mteXmhvqyurvzW','zMLUzeXHC3rjBMrLEa','C2L6zq','mZeZnZyYmKDPvKjltG','DgfYz2v0x2LK','ugf1C2u','BMfTzq'];a0_0x110e=function(){return _0x94f1a5;};return a0_0x110e();}function handlePreviewData(_0x53a407,_0x16dfc9){const _0x2251b7=a0_0x91192d;_0x16dfc9&&_0x16dfc9['images']&&_0x16dfc9[_0x2251b7(0x1c4)][_0x2251b7(0x1cf)]>0x0?(_0x53a407[_0x2251b7(0x1d2)]=_0x16dfc9[_0x2251b7(0x1c4)],renderImageMode(_0x53a407,_0x16dfc9[_0x2251b7(0x1c4)]),!_0x53a407[_0x2251b7(0x1e0)][_0x2251b7(0x1c0)]&&(_0x53a407[_0x2251b7(0x1e0)][_0x2251b7(0x1c0)]={}),_0x53a407[_0x2251b7(0x1e0)][_0x2251b7(0x1c0)][_0x2251b7(0x1c4)]=_0x16dfc9[_0x2251b7(0x1c4)],_0x53a407[_0x2251b7(0x1e0)]['_sdppp_cache']['text']=_0x16dfc9['text']):(_0x53a407[_0x2251b7(0x18d)]=null,_0x53a407[_0x2251b7(0x1d2)]=null,_0x53a407[_0x2251b7(0x1e0)][_0x2251b7(0x1c0)]&&delete _0x53a407[_0x2251b7(0x1e0)]['_sdppp_cache']);const _0x34618b='preview_text',_0x4725ec=_0x16dfc9&&_0x16dfc9[_0x2251b7(0x1c3)]?_0x16dfc9[_0x2251b7(0x1c3)]:[],_0x54b45f=_0x53a407[_0x2251b7(0x1d6)][_0x2251b7(0x1ae)](_0x504733=>_0x504733[_0x2251b7(0x195)]===_0x34618b||_0x504733[_0x2251b7(0x195)][_0x2251b7(0x196)](_0x34618b+'_'));_0x54b45f[_0x2251b7(0x181)](_0x5e1719=>{const _0x561fa5=_0x2251b7;_0x5e1719[_0x561fa5(0x1e8)]=_0x561fa5(0x1bb),_0x5e1719['computeSize']=()=>[0x0,0x0],_0x5e1719['value']='';}),_0x4725ec[_0x2251b7(0x1cf)]>0x0&&_0x4725ec[_0x2251b7(0x181)]((_0x1712ff,_0x56efc3)=>{const _0x4d83bf=_0x2251b7,_0x247be0=_0x56efc3===0x0?_0x34618b:_0x34618b+'_'+_0x56efc3;let _0x52a636=_0x53a407['widgets'][_0x4d83bf(0x1cc)](_0x1e7f86=>_0x1e7f86[_0x4d83bf(0x195)]===_0x247be0);if(!_0x52a636){const _0x3aba46=ComfyWidgets['STRING'](_0x53a407,_0x247be0,[_0x4d83bf(0x17b),{'multiline':!![]}],app);_0x52a636=_0x3aba46[_0x4d83bf(0x1a4)];const _0x5b14e0=_0x53a407[_0x4d83bf(0x1d6)][_0x4d83bf(0x1a0)](_0x52a636);if(_0x5b14e0!==-0x1){_0x53a407['widgets']['splice'](_0x5b14e0,0x1);let _0x5947da=_0x53a407['widgets']['length'];const _0x3f65b6=_0x53a407[_0x4d83bf(0x1d6)][_0x4d83bf(0x190)](_0x147c2f=>_0x147c2f[_0x4d83bf(0x195)][_0x4d83bf(0x196)](_0x34618b));_0x3f65b6!==-0x1&&(_0x5947da=_0x3f65b6+0x1),_0x53a407['widgets'][_0x4d83bf(0x1d1)](_0x5947da,0x0,_0x52a636);}}_0x52a636[_0x4d83bf(0x1e8)]=_0x4d83bf(0x1c3),_0x52a636['value']=_0x1712ff,_0x52a636[_0x4d83bf(0x1ba)]=function(_0x5b950e){const _0x319ccb=_0x4d83bf,_0x961ab=0x32,_0x2be48a=0x12c,_0x30a9d5=0x3,_0x585b1b=0x12,_0x3df981=(this[_0x319ccb(0x1e7)]||'')[_0x319ccb(0x19a)]('\x0a')['length'],_0x3d34a8=_0x3df981*_0x585b1b+_0x30a9d5;return[_0x5b950e,Math['max'](_0x961ab,Math[_0x319ccb(0x1d8)](_0x3d34a8,_0x2be48a))];},_0x52a636[_0x4d83bf(0x1b1)]?_0x52a636[_0x4d83bf(0x1b1)]['multiline']=!![]:_0x52a636[_0x4d83bf(0x1b1)]={'multiline':!![]},_0x52a636[_0x4d83bf(0x19d)]&&(_0x52a636[_0x4d83bf(0x19d)][_0x4d83bf(0x1cd)][_0x4d83bf(0x1aa)]='',_0x52a636[_0x4d83bf(0x19d)][_0x4d83bf(0x19b)]=![]);}),setTimeout(()=>{const _0x52390c=_0x2251b7;app[_0x52390c(0x1b0)][_0x52390c(0x19c)](!![],![]);},0x1);}async function renderImageMode(_0x2958c1,_0x3951f2){const _0x46072f=a0_0x91192d;if(!_0x3951f2||_0x3951f2[_0x46072f(0x1cf)]===0x0){_0x2958c1['imgs']=null,_0x2958c1[_0x46072f(0x1bd)]=null;return;}const _0x525a65=_0x3951f2[_0x46072f(0x1c8)](_0x242b66=>{const _0x447bba=_0x46072f,_0x48b4ec=new URLSearchParams({'filename':_0x242b66[_0x447bba(0x1a8)],'type':_0x242b66[_0x447bba(0x1e8)],'subfolder':_0x242b66[_0x447bba(0x1ef)]}),_0x1d65a1=api[_0x447bba(0x1a6)](_0x447bba(0x1a9)+_0x48b4ec['toString']());return new Promise(_0x4bcf27=>{const _0x5d89b4=_0x447bba,_0x41928f=new Image();_0x41928f[_0x5d89b4(0x187)]=()=>_0x4bcf27(_0x41928f),_0x41928f['onerror']=()=>{const _0x33826c=_0x5d89b4;console[_0x33826c(0x1a7)]('['+(_0x2958c1[_0x33826c(0x19e)]||'PreviewNode')+_0x33826c(0x18c)+_0x242b66[_0x33826c(0x1a8)]),_0x4bcf27(null);},_0x41928f[_0x5d89b4(0x1d5)]=_0x1d65a1;});}),_0x3aeb4a=(await Promise[_0x46072f(0x1ad)](_0x525a65))[_0x46072f(0x1ae)](_0x56dd38=>_0x56dd38!==null);_0x3aeb4a['length']>0x0&&(_0x2958c1[_0x46072f(0x18d)]=_0x3aeb4a,_0x2958c1[_0x46072f(0x1bd)]=_0x3aeb4a[_0x46072f(0x1f1)](),_0x3951f2&&_0x3951f2['length']>0x0&&(_0x2958c1[_0x46072f(0x180)]=JSON['parse'](JSON['stringify'](_0x3951f2))));}function getControlActionControl(_0x2b8cac){const _0xfe4587=a0_0x91192d,_0x4c8955=_0x2b8cac[_0xfe4587(0x184)]?.[_0xfe4587(0x1b2)](_0x1a7628=>_0x1a7628[_0xfe4587(0x195)]===_0xfe4587(0x1c6));if(_0x4c8955===-0x1||_0x4c8955===undefined)return{'isLinked':![]};const _0x3aa004=_0x2b8cac[_0xfe4587(0x184)][_0x4c8955],_0x5cb767=_0x2b8cac[_0xfe4587(0x1d6)]?.[_0xfe4587(0x1cc)](_0x17561c=>_0x17561c['name']===_0xfe4587(0x1c6));if(_0x3aa004['link'])return{'isLinked':!![],'link':_0x3aa004['link'],'input':_0x3aa004};else{if(_0x5cb767)return{'isLinked':![],'widget':_0x5cb767};}return{'isLinked':![]};}function startAutoResumeCheck(_0x2617af){const _0x1e94c0=a0_0x91192d;if(_0x2617af[_0x1e94c0(0x1e5)])clearInterval(_0x2617af['check_timer']);_0x2617af[_0x1e94c0(0x1e5)]=setInterval(()=>{const _0x2c99b8=_0x1e94c0;if(!_0x2617af[_0x2c99b8(0x18a)]){clearInterval(_0x2617af['check_timer']),_0x2617af[_0x2c99b8(0x1e5)]=null,_0x2617af['_ccnotes_full_imgs']=null;return;}if(_0x2617af['imgs']&&_0x2617af['imgs'][_0x2c99b8(0x1cf)]>0x0){_0x2617af[_0x2c99b8(0x1bd)]&&_0x2617af[_0x2c99b8(0x18d)][_0x2c99b8(0x1cf)]===_0x2617af['_ccnotes_full_imgs'][_0x2c99b8(0x1cf)]&&(typeof _0x2617af[_0x2c99b8(0x1db)]===_0x2c99b8(0x1ea)&&(_0x2617af[_0x2c99b8(0x1ec)]=_0x2617af[_0x2c99b8(0x1db)]));for(let _0x52b36a=0x0;_0x52b36a<_0x2617af[_0x2c99b8(0x18d)][_0x2c99b8(0x1cf)];_0x52b36a++){const _0x1fa117=_0x2617af[_0x2c99b8(0x18d)][_0x52b36a];if(_0x1fa117&&_0x1fa117[_0x2c99b8(0x1d5)]&&_0x1fa117[_0x2c99b8(0x1d5)]['includes'](_0x2c99b8(0x17f)))try{let _0x47c863=_0x52b36a;if(_0x2617af[_0x2c99b8(0x1bd)]&&_0x2617af[_0x2c99b8(0x1bd)]['length']>_0x2617af[_0x2c99b8(0x18d)]['length']){if(typeof _0x2617af[_0x2c99b8(0x1ec)]===_0x2c99b8(0x1ea))_0x47c863=_0x2617af['_ccnotes_last_valid_index'];else typeof _0x2617af[_0x2c99b8(0x1db)]===_0x2c99b8(0x1ea)?_0x47c863=_0x2617af[_0x2c99b8(0x1db)]:_0x47c863=0x0;}const _0x3b6c14=new URL(_0x1fa117[_0x2c99b8(0x1d5)]),_0x4bd1e6=_0x3b6c14['searchParams'][_0x2c99b8(0x17a)](_0x2c99b8(0x1a8)),_0x37d045=_0x3b6c14['searchParams'][_0x2c99b8(0x17a)](_0x2c99b8(0x1ef)),_0x48def9=_0x3b6c14[_0x2c99b8(0x1c2)][_0x2c99b8(0x17a)](_0x2c99b8(0x1e8));if(_0x4bd1e6&&_0x2617af[_0x2c99b8(0x180)]){const _0x58afc8=_0x2617af['_ccnotes_full_images_data'][_0x47c863];if(!_0x58afc8||_0x58afc8[_0x2c99b8(0x1a8)]!==_0x4bd1e6){if(!_0x2617af[_0x2c99b8(0x180)][_0x47c863])_0x2617af[_0x2c99b8(0x180)][_0x47c863]={};_0x2617af[_0x2c99b8(0x180)][_0x47c863]={'filename':_0x4bd1e6,'subfolder':_0x37d045,'type':_0x48def9},_0x2617af['_ccnotes_full_imgs']&&_0x47c863<_0x2617af[_0x2c99b8(0x1bd)][_0x2c99b8(0x1cf)]&&(_0x2617af[_0x2c99b8(0x1bd)][_0x47c863]=_0x1fa117);}}}catch(_0x1fbd44){console[_0x2c99b8(0x1a7)](_0x2c99b8(0x1d0),_0x1fbd44);}}}_0x2617af[_0x2c99b8(0x1bd)]&&_0x2617af[_0x2c99b8(0x1bd)][_0x2c99b8(0x1cf)]>0x1&&(_0x2617af['imgs']&&_0x2617af[_0x2c99b8(0x18d)][_0x2c99b8(0x1cf)]<_0x2617af['_ccnotes_full_imgs'][_0x2c99b8(0x1cf)]&&(_0x2617af['imgs']=_0x2617af[_0x2c99b8(0x1bd)]['slice'](),app[_0x2c99b8(0x1b0)]['setDirtyCanvas'](!![],![])));const _0x107021=getControlActionValue(_0x2617af),_0x1c2ae7=String(_0x107021)[_0x2c99b8(0x1a2)]();if(_0x1c2ae7[_0x2c99b8(0x1cb)](_0x2c99b8(0x189)))sendAction(_0x2617af,'▶\x20CONTINUE');else _0x1c2ae7[_0x2c99b8(0x1cb)](_0x2c99b8(0x18e))&&(api[_0x2c99b8(0x183)](),sendAction(_0x2617af,_0x2c99b8(0x185)));},0xc8);}function getControlActionValue(_0x13d8f6){const _0x8a41de=a0_0x91192d,_0x520de6=getControlActionControl(_0x13d8f6);if(_0x520de6[_0x8a41de(0x17d)]){const _0x4b592f=app[_0x8a41de(0x1b0)]['links'][_0x520de6[_0x8a41de(0x1e9)]];if(!_0x4b592f)return _0x8a41de(0x19f);const _0x46f6ae=app['graph'][_0x8a41de(0x1e4)](_0x4b592f[_0x8a41de(0x1a1)]);if(!_0x46f6ae)return _0x8a41de(0x19f);if(_0x46f6ae['widgets']&&_0x46f6ae[_0x8a41de(0x1d6)][_0x8a41de(0x1cf)]>0x0)return String(_0x46f6ae[_0x8a41de(0x1d6)][0x0][_0x8a41de(0x1e7)]);}else{if(_0x520de6[_0x8a41de(0x1a4)])return String(_0x520de6['widget']['value']);}return _0x8a41de(0x19f);}function addNativeControlPanel(_0x173475){updateButtonVisibility(_0x173475);}function updateButtonVisibility(_0x363f26){const _0x46675c=a0_0x91192d,_0x410fe7=_0x363f26[_0x46675c(0x1d6)]?.[_0x46675c(0x1cc)](_0xaacb9a=>_0xaacb9a[_0x46675c(0x195)]===_0x46675c(0x1c6));if(!_0x410fe7)return;const _0x37f557=_0x410fe7[_0x46675c(0x1e7)],_0x1d2e44=_0x37f557===_0x46675c(0x194),_0x1372c8=_0x363f26[_0x46675c(0x1d6)]?.[_0x46675c(0x1cc)](_0x41a4fe=>_0x41a4fe['name']===_0x46675c(0x1f0)),_0x1ecad4=_0x363f26[_0x46675c(0x1d6)]?.[_0x46675c(0x1cc)](_0x1803cb=>_0x1803cb['name']===_0x46675c(0x185)),_0x59d794=_0x1372c8&&_0x1ecad4;if(_0x1d2e44&&!_0x59d794){const _0x30c468={'serialize':![]},_0x47b12f=_0x363f26[_0x46675c(0x1ac)](_0x46675c(0x1b8),_0x46675c(0x1ee),null,()=>sendAction(_0x363f26,_0x46675c(0x1f0)),_0x30c468);_0x47b12f[_0x46675c(0x195)]='▶\x20CONTINUE';const _0x2f1725=_0x363f26[_0x46675c(0x1ac)](_0x46675c(0x1b8),'cancel',null,()=>{const _0x34a4ae=_0x46675c;api[_0x34a4ae(0x183)](),sendAction(_0x363f26,_0x34a4ae(0x185));},_0x30c468);_0x2f1725['name']=_0x46675c(0x185);const _0x5381a=_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1b2)](_0x19c4c2=>_0x19c4c2[_0x46675c(0x195)]===_0x46675c(0x1c6));if(_0x5381a!==-0x1){const _0x267ee4=_0x363f26['widgets'][_0x46675c(0x1a0)](_0x47b12f),_0x78b9cc=_0x363f26[_0x46675c(0x1d6)]['indexOf'](_0x2f1725);if(_0x267ee4!==-0x1)_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1d1)](_0x267ee4,0x1);if(_0x78b9cc!==-0x1){const _0x2ccb26=_0x267ee4!==-0x1&&_0x78b9cc>_0x267ee4?_0x78b9cc-0x1:_0x78b9cc;_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1d1)](_0x2ccb26,0x1);}_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1d1)](_0x5381a+0x1,0x0,_0x47b12f,_0x2f1725);}_0x363f26[_0x46675c(0x18b)](_0x363f26[_0x46675c(0x1ba)]()),app[_0x46675c(0x1b0)]&&app[_0x46675c(0x1b0)][_0x46675c(0x19c)](!![],!![]);}else{if(!_0x1d2e44&&_0x59d794){const _0x3bc920=_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1a0)](_0x1372c8),_0x191c65=_0x363f26['widgets'][_0x46675c(0x1a0)](_0x1ecad4);_0x3bc920!==-0x1&&_0x363f26[_0x46675c(0x1d6)][_0x46675c(0x1d1)](_0x3bc920,0x1);if(_0x191c65!==-0x1){const _0x23c0ad=_0x3bc920!==-0x1&&_0x191c65>_0x3bc920?_0x191c65-0x1:_0x191c65;_0x363f26['widgets']['splice'](_0x23c0ad,0x1);}_0x363f26[_0x46675c(0x18b)](_0x363f26[_0x46675c(0x1ba)]()),app[_0x46675c(0x1b0)]&&app['graph'][_0x46675c(0x19c)](!![],!![]);}}}function sendAction(_0x546668,_0x192d18){const _0x556345=a0_0x91192d;_0x546668[_0x556345(0x18a)]=![];_0x546668[_0x556345(0x1e5)]&&(clearInterval(_0x546668[_0x556345(0x1e5)]),_0x546668[_0x556345(0x1e5)]=null);const _0x452447=_0x192d18[_0x556345(0x1a2)](),_0x21ecb7=_0x556345(0x1e6),_0x531f03=_0x546668[_0x556345(0x1d6)]?.[_0x556345(0x1ae)](_0x3da192=>_0x3da192['name']===_0x21ecb7||_0x3da192[_0x556345(0x195)][_0x556345(0x196)](_0x21ecb7+'_'));_0x531f03[_0x556345(0x1c9)]((_0x48a8a1,_0x5a1449)=>{const _0x5c9518=_0x556345;if(_0x48a8a1[_0x5c9518(0x195)]===_0x21ecb7)return-0x1;if(_0x5a1449['name']===_0x21ecb7)return 0x1;const _0x1fdd12=parseInt(_0x48a8a1[_0x5c9518(0x195)]['split']('_')[0x2]||0x0),_0x282259=parseInt(_0x5a1449[_0x5c9518(0x195)]['split']('_')[0x2]||0x0);return _0x1fdd12-_0x282259;});let _0x513c7e=[];_0x531f03&&_0x531f03[_0x556345(0x1cf)]>0x0&&(_0x513c7e=_0x531f03['map'](_0x47f45e=>_0x47f45e['value']));if(_0x452447['includes'](_0x556345(0x189))||_0x452447[_0x556345(0x1cb)](_0x556345(0x1ee))||_0x452447[_0x556345(0x1cb)](_0x556345(0x18e))){const _0x33c5b3=getControlActionControl(_0x546668),_0x2869a2=_0x546668[_0x556345(0x1c1)]!==undefined?_0x546668[_0x556345(0x1c1)]:'Pause';if(_0x33c5b3[_0x556345(0x17d)]&&_0x33c5b3['link']){const _0x4f531a=app[_0x556345(0x1b0)][_0x556345(0x1b3)][_0x33c5b3[_0x556345(0x1e9)]],_0x5435de=app[_0x556345(0x1b0)][_0x556345(0x1e4)](_0x4f531a['origin_id']);if(_0x5435de&&_0x5435de[_0x556345(0x1d6)]&&_0x5435de[_0x556345(0x1d6)][_0x556345(0x1cf)]>0x0){const _0x2280c0=_0x5435de['widgets'][0x0];_0x2280c0[_0x556345(0x1e7)]!==_0x2869a2&&(_0x2280c0['value']=_0x2869a2,_0x5435de['setDirtyCanvas'](!![],!![]));}}else _0x33c5b3[_0x556345(0x1a4)]&&(_0x33c5b3[_0x556345(0x1a4)]['value']=_0x2869a2,_0x546668[_0x556345(0x19c)](!![],!![]));setTimeout(()=>{updateButtonVisibility(_0x546668);},0x1);}let _0xd5eff4=_0x556345(0x1ee);if(_0x452447[_0x556345(0x1cb)]('cancel'))_0xd5eff4=_0x556345(0x18e);const _0x4426ec={'node_id':_0x546668['id'],'action':_0xd5eff4,'edited_text':_0x513c7e,'images':_0x546668[_0x556345(0x180)]};api[_0x556345(0x1d4)]('/ccnotes/resume_pause',{'method':_0x556345(0x1d7),'headers':{'Content-Type':'application/json'},'body':JSON[_0x556345(0x1d3)](_0x4426ec)})[_0x556345(0x199)](_0x4e45d6=>{const _0x464f06=_0x556345;console[_0x464f06(0x198)]('['+(_0x546668['comfyClass']||'PauseNode')+_0x464f06(0x1b5),_0x4e45d6);});}